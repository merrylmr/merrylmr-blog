(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{331:function(e,t,n){"use strict";n.r(t);var o=n(14),r=Object(o.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"解决切换tab-wow动画不生效问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决切换tab-wow动画不生效问题"}},[e._v("#")]),e._v(" 解决切换tab ,wow动画不生效问题")]),e._v(" "),t("h2",{attrs:{id:"问题描述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题描述"}},[e._v("#")]),e._v(" 问题描述")]),e._v(" "),t("p",[e._v("在tab非激活项为"),t("code",[e._v("display:none")]),e._v("时候，里面的组件设置了"),t("code",[e._v("wow")]),e._v("动画，切换到其他项，组件不显示。  "),t("code",[e._v("wow")]),e._v("动画未执行。")]),e._v(" "),t("h2",{attrs:{id:"解决方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[e._v("#")]),e._v(" 解决方案")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("  const instance = new WOW({\n    live: false\n  });\n  instance.init();\n // 就是以下两行代码\n  document.addEventListener('click', () => {\n    instance.scrolled = true;\n  }, true)\n")])])]),t("h2",{attrs:{id:"关键源码解析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关键源码解析"}},[e._v("#")]),e._v(" 关键源码解析")]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("wow的轮询")]),e._v("\nthis.interval = setInterval(this.scrollCallback, 50)")])]),e._v(" "),t("p",[e._v("轮询里面有一个变量：this.scrolled为true时 才会去判断页面上的组件动画显示与否。")]),e._v(" "),t("p",[e._v("当滚动的时候，this.scrolled=true；")]),e._v(" "),t("p",[e._v("但是我们需要在tab切换之后，里面的组件也需要去执行"),t("code",[e._v("wow")]),e._v("动画，所以将scrolled设置为true,去执行滚动回调即可。")]),e._v(" "),t("p",[e._v("scrollCallback源码")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("    WOW.prototype.scrollCallback = function() {\n      var box;\n      if (this.scrolled) {\n        this.scrolled = false;\n        this.boxes = (function() {\n          var j, len, ref, results;\n          ref = this.boxes;\n          results = [];\n          for (j = 0, len = ref.length; j < len; j++) {\n            box = ref[j];\n            if (!(box)) {\n              continue;\n            }\n            if (this.isVisible(box)) {\n              this.show(box);\n              continue;\n            }\n            results.push(box);\n          }\n          return results;\n        }).call(this);\n        if (!(this.boxes.length || this.config.live)) {\n          return this.stop();\n        }\n      }\n    };\n")])])]),t("h2",{attrs:{id:"知识点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#知识点"}},[e._v("#")]),e._v(" 知识点")]),e._v(" "),t("ul",[t("li",[e._v("element.offsetParent")])]),e._v(" "),t("blockquote",[t("p",[t("strong",[t("code",[e._v("HTMLElement.offsetParent")])]),e._v(" 是一个只读属性，返回一个指向最近的（指包含层级上的最近）包含该元素的定位元素或者最近的 "),t("code",[e._v("table,``td,``th,``body")]),e._v("元素。当元素的 "),t("code",[e._v("style.display")]),e._v(' 设置为 "none" 时，'),t("code",[e._v("offsetParent")]),e._v(" 返回 "),t("code",[e._v("null")]),e._v("。"),t("code",[e._v("offsetParent")]),e._v(" 很有用，因为 "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/offsetTop",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("offsetTop")]),t("OutboundLink")],1),e._v(" 和 "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/offsetLeft",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("offsetLeft")]),t("OutboundLink")],1),e._v(" 都是相对于其内边距边界的。")])]),e._v(" "),t("ul",[t("li",[e._v("element.offsetTop")])]),e._v(" "),t("blockquote",[t("p",[t("strong",[t("code",[e._v("HTMLElement.offsetTop")])]),e._v(" 为只读属性，它返回当前元素相对于其 "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/offsetParent",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("offsetParent")]),t("OutboundLink")],1),e._v(" 元素的顶部内边距的距离")])]),e._v(" "),t("p",[e._v("所以当某一层父级有"),t("code",[e._v("display:none")]),e._v("时候，里面的元素获取 "),t("code",[e._v("element.offsetTop=0")])]),e._v(" "),t("h2",{attrs:{id:"参考教程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考教程"}},[e._v("#")]),e._v(" 参考教程")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/offsetParent",target:"_blank",rel:"noopener noreferrer"}},[e._v("HTMLElement.offsetParent"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/offsetTop",target:"_blank",rel:"noopener noreferrer"}},[e._v("HTMLElement.offsetTop"),t("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=r.exports}}]);